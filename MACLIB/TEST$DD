         MACRO
&NAME    TEST$DD &DCB,&DDNAME
.* THIS MACRO TEST IF THE DDNAME NAME IS PRESENT IN THE TIOT,
.* AND IF SO COPIES THE NAME INTO THE DCBDDNAM FIELD OF THE DCB
.* PROVIDED.
         USING IHADCB,R9
* TEST IF DDNAME IN TIOT (CODED IN JCL)
         LA    R0,CALLAREA     ANSWER AREA.
         LA    R1,=CL8'&DDNAME' DDNAME
*        SVC   24             DEVTYPE MACRO
         L     R15,=V(SRCHTIOT) SEARCH TIOT FOR NAME RTN          87150
         BALR  R14,R15                                            87150
         LTR   R15,R15        IS DDNAME IN TIOT ?
         BNZ   #&SYSNDX       NO
* DDNAME IS THERE, COPY INTO DCB
         LA    R9,&DCB        SET R9 TO THE ADDRESS OF THE DCB
         MVC   DCBDDNAM,=CL8'&DDNAME' COPY (CHANGE) DCB DDNAME
#&SYSNDX EQU   *
         MEND
